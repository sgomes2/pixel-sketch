const { SerialPort } = require('serialport');
const port = new SerialPort({ path: '/dev/ttyACM0', baudRate: 115200});

const testImage = [5,5,6,6,6,6,6,6,5,6,6,6,6,6,6,5,6,5,6,6,6,6,6,6,5,6,6,6,6,6,5,5,7,7,5,6,6,6,6,6,5,6,6,6,6,6,7,7,6,7,5,6,6,6,6,6,5,6,6,6,6,5,7,7,6,7,7,5,6,6,6,6,5,6,6,6,6,5,7,7,6,6,7,7,5,5,5,5,5,5,5,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,7,7,7,7,7,6,6,6,6,5,5,4,4,4,7,7,7,7,7,7,7,5,5,5,5,7,7,7,7,4,4,4,7,5,5,5,5,6,6,6,7,7,5,7,4,4,4,7,5,5,6,6,6,6,6,7,6,5,7,4,4,4,4,7,5,5,6,6,6,6,6,7,5,5,7,5,5,5,7,7,5,5,5,6,6,6,6,7,7,7,7,6,6,5,7,6,6,6,5,5,6,6,5,5,6,7,7,7,7,7,7,7,7,7,6,5,6,5,5,6,6,6,6,7,6,7,6,6,6,6,6,5,5,5,6,6,6,6,6,7,7,7,6,6,6,6,6,6,5]
// 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,2,2,0,0,0,0,0
console.log(testImage.toString());
const sleep = ms => new Promise(r => setTimeout(r, ms));

port.on('open', (err) => {
    if(err) {
        console.log("Open port is failed : ", err.message)
    }
    console.log('port open')

    setTimeout(drawImage, 5000);
})

const drawImage = () => {
    setTimeout(() => {
        port.write(testImage.slice(0, 128).toString());
    }, 1200);

    setTimeout(() => {
        port.write(testImage.slice(128).toString());
    }, 3000);
}



// Open errors will be emitted as an error event
port.on('error', function(err) {
    console.log('Error: ', err.message)
});
